<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anas Dashboard</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-main: #e0e0e0;
            --text-muted: #a0a0a0;
            --accent-prio1: #ff5252; /* RÃ¶d */
            --accent-prio2: #ffa726; /* Orange */
            --accent-prio3: #42a5f5; /* BlÃ¥ */
            --accent-prio4: #ab47bc; /* Lila */
            --accent-prio5: #26a69a; /* Teal */
            --accent-prio6: #78909c; /* GrÃ¥ */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            padding-bottom: 80px;
        }

        h1 { font-size: 1.5rem; text-align: center; margin-bottom: 20px; }
        h2 { font-size: 1.2rem; margin-top: 0; }
        
        .section-header {
            background-color: #333;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }

        .prio-1-header { border-left: 5px solid var(--accent-prio1); }
        .prio-2-header { border-left: 5px solid var(--accent-prio2); }
        .prio-3-header { border-left: 5px solid var(--accent-prio3); }
        .prio-4-header { border-left: 5px solid var(--accent-prio4); }
        .prio-5-header { border-left: 5px solid var(--accent-prio5); }
        .prio-6-header { border-left: 5px solid var(--accent-prio6); }

        .project-list {
            display: none; /* Dold som standard */
            margin-bottom: 20px;
        }

        .project-list.open {
            display: block;
        }

        .project-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid #333;
        }

        .project-title {
            font-size: 1rem;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .project-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 10px;
        }

        .progress-container {
            background-color: #333;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        button {
            background-color: #444;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            flex: 1;
        }

        button:active { transform: scale(0.98); }
        
        .btn-add { background-color: #2e7d32; }
        .time-display { font-size: 0.8rem; color: var(--text-muted); text-align: right; }

        /* UtfÃ¤llnings-ikon */
        .arrow { transition: transform 0.3s; }
        .open .arrow { transform: rotate(180deg); }

    </style>
</head>
<body>

    <h1>Anas Dashboard</h1>

    <!-- PRIO 1 -->
    <div class="section-header prio-1-header" onclick="toggleSection('prio1')">
        <span>ðŸ”´ PRIO 1: TUNG (Daglig)</span>
        <span class="arrow">â–¼</span>
    </div>
    <div id="prio1" class="project-list open">
        <!-- JS fyller pÃ¥ hÃ¤r -->
    </div>

    <!-- PRIO 2 -->
    <div class="section-header prio-2-header" onclick="toggleSection('prio2')">
        <span>ðŸŸ  PRIO 2: BALANS (Daglig)</span>
        <span class="arrow">â–¼</span>
    </div>
    <div id="prio2" class="project-list">
        <!-- JS fyller pÃ¥ hÃ¤r -->
    </div>

    <!-- PRIO 3 -->
    <div class="section-header prio-3-header" onclick="toggleSection('prio3')">
        <span>ðŸ”µ PRIO 3: GRUND (Daglig)</span>
        <span class="arrow">â–¼</span>
    </div>
    <div id="prio3" class="project-list">
        <!-- JS fyller pÃ¥ hÃ¤r -->
    </div>

    <!-- PRIO 4 -->
    <div class="section-header prio-4-header" onclick="toggleSection('prio4')">
        <span>ðŸŸ£ PRIO 4: VECKOVIS (1ggr/v)</span>
        <span class="arrow">â–¼</span>
    </div>
    <div id="prio4" class="project-list">
        <!-- JS fyller pÃ¥ hÃ¤r -->
    </div>

    <!-- PRIO 5 -->
    <div class="section-header prio-5-header" onclick="toggleSection('prio5')">
        <span>ðŸŸ¢ PRIO 5: VARANNAN VECKA</span>
        <span class="arrow">â–¼</span>
    </div>
    <div id="prio5" class="project-list">
        <!-- JS fyller pÃ¥ hÃ¤r -->
    </div>

    <!-- PRIO 6 -->
    <div class="section-header prio-6-header" onclick="toggleSection('prio6')">
        <span>âšª PRIO 6: MÃ…NADSVIS (Strategi)</span>
        <span class="arrow">â–¼</span>
    </div>
    <div id="prio6" class="project-list">
        <!-- JS fyller pÃ¥ hÃ¤r -->
    </div>

    <div style="text-align: center; margin-top: 30px; opacity: 0.5; font-size: 0.8rem;">
        <button onclick="hardReset()" style="background-color: #b71c1c; width: auto; padding: 5px 10px;">âš  NollstÃ¤ll ALLT manuellt</button>
    </div>

<script>
    // --- DATASTRUKTUR ---
    const projects = [
        // PRIO 1 (Daglig - Max 6h totalt)
        { id: 'yt_long', title: 'YouTube LÃ¥ng-format', desc: 'Inspelning & Planering', prio: 1, target: 360 },
        { id: 'yt_short', title: 'YouTube Kort-format', desc: 'Shorts, Reels, Klippning', prio: 1, target: 360 },
        
        // PRIO 2 (Daglig - Max 4h totalt)
        { id: 'social_txt', title: 'Instagram/Social Media', desc: 'TextinlÃ¤gg & Community', prio: 2, target: 240 },
        { id: 'fam_act', title: 'Familjeaktiviteter', desc: 'Spel, promenader, utflykt', prio: 2, target: 240 },
        { id: 'azzah_time', title: 'Kvalitetstid Azzah', desc: 'Relation & Partner', prio: 2, target: 240 },
        { id: 'kids_1on1', title: 'En-mot-en Tid', desc: 'Individuell tid med barnen', prio: 2, target: 240 },
        { id: 'nature_walk', title: 'Reflektion & Natur', desc: 'Mental klarhet', prio: 2, target: 240 },
        { id: 'morning_walk', title: 'Intensiv Morgonpromenad', desc: 'Kardio (nÃ¤r igÃ¥ng)', prio: 2, target: 60 },

        // PRIO 3 (Daglig - Max 4h totalt)
        { id: 'autobio', title: 'Bok: SjÃ¤lvbiografi', desc: 'Skrivande (Transformation)', prio: 3, target: 60 },
        { id: 'prayer', title: 'Andlighet & BÃ¶n', desc: 'Fajr, Koran, Adhkar', prio: 3, target: 60 },
        { id: 'meals', title: 'FamiljemÃ¥ltider', desc: 'Frukost/Middag nÃ¤rvaro', prio: 3, target: 60 },
        { id: 'cleaning', title: 'Teamwork StÃ¤dning', desc: 'Husets ordning', prio: 3, target: 60 },
        { id: 'learning', title: 'LÃ¤rande & LÃ¤sning', desc: 'BÃ¶cker, Audio, Insights', prio: 3, target: 60 },

        // PRIO 4 (Veckovis - Max 1h/vecka per projekt)
        { id: 'book_thriller', title: 'Bok: Deckare', desc: 'Skrivande', prio: 4, target: 60 },
        { id: 'podcast', title: 'Podcast Egen/Gemensam', desc: 'Planering/Inspelning', prio: 4, target: 60 },
        { id: 'community_grp', title: 'Online Grupper', desc: 'WhatsApp/Telegram planering', prio: 4, target: 60 },
        { id: 'biz_merch', title: 'Business & Merch', desc: 'Eget varumÃ¤rke start-up', prio: 4, target: 60 },
        { id: 'keto_prep', title: 'Meal Prep', desc: 'Matlagning storkok', prio: 4, target: 120 },

        // PRIO 5 (Varannan vecka - Max 1h)
        { id: 'coach_adhd', title: 'ADHD & Livscoach', desc: 'Plattform & Konsultation', prio: 5, target: 60 },
        { id: 'coach_family', title: 'Familj & Faderscoach', desc: 'Konceptutveckling', prio: 5, target: 60 },
        { id: 'azzah_strat', title: 'Azzah VarumÃ¤rke', desc: 'Strategi & StÃ¶d', prio: 5, target: 60 },
        { id: 'azzah_ecom', title: 'Azzah E-handel', desc: 'Produkter & SÃ¤lj', prio: 5, target: 60 },

        // PRIO 6 (MÃ¥nadsvis - Max 1h)
        { id: 'book_adhd', title: 'Bok: Om ADHD', desc: 'Research & IdÃ©er', prio: 6, target: 60 },
        { id: 'blog_art', title: 'Blogg & Artiklar', desc: 'Research & AI-trÃ¤ning', prio: 6, target: 60 },
        { id: 'course_event', title: 'Kurser & Events', desc: 'Planering live-event', prio: 6, target: 60 },
        { id: 'tech_ai', title: 'AI & Tech', desc: 'SaaS, Appar, Framtid', prio: 6, target: 60 },
        { id: 'strategy', title: 'Strategisk Planering', desc: 'Vision & LÃ¥ngsiktighet', prio: 6, target: 60 },
        { id: 'pedagogy', title: 'Pedagogik barn', desc: 'Undervisningsmetoder', prio: 6, target: 60 },
        { id: 'networking', title: 'NÃ¤tverkande', desc: 'Social expansion', prio: 6, target: 60 },
        { id: 'personal_dev', title: 'Personlig Transf.', desc: 'System & TillstÃ¥nd', prio: 6, target: 60 }
    ];

    // --- LOGIK FÃ–R ATT SPARA OCH LADDA ---
    let progressData = JSON.parse(localStorage.getItem('anasProgress')) || {};
    let lastReset = JSON.parse(localStorage.getItem('anasResets')) || { daily: 0, weekly: 0, biweekly: 0, monthly: 0 };

    function saveData() {
        localStorage.setItem('anasProgress', JSON.stringify(progressData));
        localStorage.setItem('anasResets', JSON.stringify(lastReset));
        render();
    }

    // --- NOLLSTÃ„LLNINGSLOGIK ---
    function checkResets() {
        const now = new Date();
        const todayStr = now.toDateString(); // "Mon Dec 08 2025"
        
        // Hitta veckonummer
        const onejan = new Date(now.getFullYear(), 0, 1);
        const weekNum = Math.ceil((((now - onejan) / 86400000) + onejan.getDay() + 1) / 7);
        const monthNum = now.getMonth();

        let hasChanged = false;

        // 1. DAGLIG RESET (Prio 1, 2, 3)
        if (lastReset.daily !== todayStr) {
            projects.forEach(p => {
                if (p.prio <= 3) progressData[p.id] = 0;
            });
            lastReset.daily = todayStr;
            hasChanged = true;
        }

        // 2. VECKOVIS RESET (Prio 4) - Varje ny vecka
        if (lastReset.weekly !== weekNum) {
            projects.forEach(p => {
                if (p.prio === 4) progressData[p.id] = 0;
            });
            lastReset.weekly = weekNum;
            hasChanged = true;
        }

        // 3. VARANNAN VECKA RESET (Prio 5)
        // Enkel logik: Om veckonummer Ã¤r jÃ¤mnt/udda annorlunda Ã¤n sist
        if (Math.abs(lastReset.biweekly - weekNum) >= 2) {
             projects.forEach(p => {
                if (p.prio === 5) progressData[p.id] = 0;
            });
            lastReset.biweekly = weekNum;
            hasChanged = true;
        }

        // 4. MÃ…NADSVIS RESET (Prio 6)
        if (lastReset.monthly !== monthNum) {
            projects.forEach(p => {
                if (p.prio === 6) progressData[p.id] = 0;
            });
            lastReset.monthly = monthNum;
            hasChanged = true;
        }

        if (hasChanged) saveData();
    }

    // --- RENDERINGSFUNKTION ---
    function render() {
        // Rensa listorna
        ['prio1', 'prio2', 'prio3', 'prio4', 'prio5', 'prio6'].forEach(id => {
            document.getElementById(id).innerHTML = '';
        });

        projects.forEach(p => {
            const current = progressData[p.id] || 0;
            const pct = Math.min((current / p.target) * 100, 100);
            
            // FÃ¤rg baserat pÃ¥ Prio
            let color = '#ccc';
            if(p.prio === 1) color = 'var(--accent-prio1)';
            if(p.prio === 2) color = 'var(--accent-prio2)';
            if(p.prio === 3) color = 'var(--accent-prio3)';
            if(p.prio === 4) color = 'var(--accent-prio4)';
            if(p.prio === 5) color = 'var(--accent-prio5)';
            if(p.prio === 6) color = 'var(--accent-prio6)';

            const html = `
                <div class="project-card">
                    <div class="project-title">
                        <span>${p.title}</span>
                        <span class="time-display">${formatTime(current)} / ${formatTime(p.target)}</span>
                    </div>
                    <div class="project-desc">${p.desc}</div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: ${pct}%; background-color: ${color};"></div>
                    </div>
                    <div class="btn-group">
                        <button onclick="addTime('${p.id}', 15)">+15 min</button>
                        <button onclick="addTime('${p.id}', 30)">+30 min</button>
                        <button onclick="addTime('${p.id}', 60)">+1h</button>
                    </div>
                </div>
            `;
            
            document.getElementById('prio' + p.prio).innerHTML += html;
        });
    }

    function addTime(id, minutes) {
        if (!progressData[id]) progressData[id] = 0;
        progressData[id] += minutes;
        saveData();
    }

    function formatTime(minutes) {
        if (minutes >= 60) {
            const h = Math.floor(minutes / 60);
            const m = minutes % 60;
            return m > 0 ? `${h}h ${m}m` : `${h}h`;
        }
        return `${minutes}m`;
    }

    function toggleSection(id) {
        const el = document.getElementById(id);
        const header = document.querySelector('.' + id.replace('prio', 'prio-') + '-header');
        
        if (el.classList.contains('open')) {
            el.classList.remove('open');
            header.classList.remove('open');
        } else {
            el.classList.add('open');
            header.classList.add('open');
        }
    }

    function hardReset() {
        if(confirm("Vill du verkligen nollstÃ¤lla ALLT? Detta gÃ¥r inte att Ã¥ngra.")) {
            localStorage.clear();
            location.reload();
        }
    }

    // KÃ¶r vid start
    checkResets();
    render();

</script>

</body>
</html>
