<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Transformation PWA</title>
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Transformation">
    <meta name="theme-color" content="#667eea">
    
    <!-- Icons -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%23667eea'/><text x='50' y='60' text-anchor='middle' fill='white' font-size='40'>üìÖ</text></svg>">
    
    <style>
        /* Critical CSS - Inline for immediate rendering */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
            min-height: calc(100vh - 20px);
        }
        .view { display: none; }
        .view.active { display: block; }
        
        /* Overview Styles */
        .overview-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        .overview-header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 300;
        }
        .current-time {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        .week-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 30px;
        }
        .day-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
            will-change: transform;
        }
        .day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        .day-card.today {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        .day-header {
            padding: 20px;
            text-align: center;
            color: white;
            font-weight: bold;
            font-size: 1.3em;
        }
        .monday { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); color: #333; }
        .tuesday { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; }
        .wednesday { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); color: #333; }
        .thursday { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .friday { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .saturday { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .sunday { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: #333; }
        
        .day-content {
            padding: 20px;
        }
        .day-theme {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .day-summary {
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }
        .today-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Day Schedule Styles */
        .schedule-header {
            padding: 20px;
            text-align: center;
            position: relative;
            color: white;
        }
        .schedule-header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        .navigation {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
        }
        .nav-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .nav-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        .schedule-content {
            padding: 30px;
        }
        .principles {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        .principles h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        .principle-detailed {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .schedule-grid {
            display: grid;
            gap: 15px;
        }
        .time-block {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border-left: 5px solid #667eea;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            will-change: transform;
        }
        .time-block:hover {
            transform: translateX(5px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.12);
        }
        .time-block.current {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.02);
        }
        .time {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 8px;
            color: #667eea;
        }
        .time-block.current .time {
            color: white;
        }
        .activity {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1em;
        }
        .description {
            font-size: 0.9em;
            color: #666;
            line-height: 1.4;
        }
        .time-block.current .description {
            color: rgba(255,255,255,0.9);
        }
        
        /* Color schemes - Optimized with CSS custom properties */
        :root {
            --monday-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --tuesday-bg: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            --wednesday-bg: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            --thursday-bg: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
            --friday-bg: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --saturday-bg: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%);
            --sunday-bg: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
        }
        
        .monday-scheme { background: var(--monday-bg); }
        .tuesday-scheme { background: var(--tuesday-bg); }
        .wednesday-scheme { background: var(--wednesday-bg); }
        .thursday-scheme { background: var(--thursday-bg); }
        .friday-scheme { background: var(--friday-bg); }
        .saturday-scheme { background: var(--saturday-bg); }
        .sunday-scheme { background: var(--sunday-bg); }
        
        .monday-header { background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); }
        .tuesday-header { background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%); }
        .wednesday-header { background: linear-gradient(135deg, #00b894 0%, #00cec9 100%); }
        .thursday-header { background: linear-gradient(135deg, #6c5ce7 0%, #2d3436 100%); }
        .friday-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .saturday-header { background: linear-gradient(135deg, #81c784 0%, #4caf50 100%); }
        .sunday-header { background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%); }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            body { padding: 5px; }
            .overview-header, .schedule-header { padding: 20px; }
            .overview-header h1, .schedule-header h1 { font-size: 2em; }
            .week-grid { grid-template-columns: 1fr; padding: 20px; }
            .current-time { position: static; margin-top: 10px; }
            .schedule-content { padding: 20px; }
            .navigation { position: static; transform: none; margin-bottom: 10px; }
        }
        
        /* Performance optimizations */
        .day-card, .time-block {
            contain: layout style paint;
        }
        
        /* Reduce repaints */
        .view {
            contain: layout style;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Week Overview -->
        <div id="week-overview" class="view active">
            <div class="overview-header">
                <div class="current-time" id="currentTime"></div>
                <h1>üìÖ Transformationsschema</h1>
                <div class="subtitle">Veck√∂versikt - ADHD-optimerad utvecklingsresa</div>
            </div>
            
            <div class="week-grid" id="weekGrid"></div>
        </div>
        
        <!-- Day views - Lazy loaded -->
        <div id="monday" class="view monday-scheme" data-loaded="false">
            <div class="schedule-header monday-header">
                <div class="navigation">
                    <button class="nav-btn" onclick="showView('week-overview')">‚Üê √ñversikt</button>
                </div>
                <h1>üåÖ M√•ndag - Ny B√∂rjan</h1>
            </div>
            
            <div class="schedule-content">
                <div class="principles">
                    <h3>üéØ M√•ndagens Specialfokus - Foundation & Fresh Start</h3>
                    <div class="principle-detailed">
                        <strong>üåÖ Fresh start mindset:</strong> N√§rma dig m√•ndagen som en ren slate. Gamla misstag √§r l√§rdomomar, inte hinder.
                    </div>
                    <div class="principle-detailed">
                        <strong>üèóÔ∏è Foundation-byggande:</strong> Anv√§nd m√•ndagar f√∂r att establish the week's foundation.
                    </div>
                </div>
                
                <div class="schedule-grid" id="mondaySchedule"></div>
            </div>
        </div>
        
        <div id="tuesday" class="view tuesday-scheme" data-loaded="false">
            <div class="schedule-header tuesday-header">
                <div class="navigation">
                    <button class="nav-btn" onclick="showView('week-overview')">‚Üê √ñversikt</button>
                </div>
                <h1>üí™ Tisdag - Power & Produktion</h1>
            </div>
            
            <div class="schedule-content">
                <div class="principles">
                    <h3>üéØ Tisdagens Specialfokus - Power & Produktivitet</h3>
                    <div class="principle-detailed">
                        <strong>üí™ Peak performance execution:</strong> Tisdag √§r optimal f√∂r highest-impact activities.
                    </div>
                </div>
                
                <div class="schedule-grid" id="tuesdaySchedule"></div>
            </div>
        </div>
        
        <div id="wednesday" class="view wednesday-scheme" data-loaded="false">
            <div class="schedule-header wednesday-header">
                <div class="navigation">
                    <button class="nav-btn" onclick="showView('week-overview')">‚Üê √ñversikt</button>
                </div>
                <h1>‚öñÔ∏è Onsdag - Balans & V√§xande</h1>
            </div>
            
            <div class="schedule-content">
                <div class="principles">
                    <h3>üéØ Onsdagens Specialfokus - Balans & H√•llbar Tillv√§xt</h3>
                    <div class="principle-detailed">
                        <strong>‚öñÔ∏è Holistic balance:</strong> Integrera fysisk, mental, andlig och emotionell wellness.
                    </div>
                </div>
                
                <div class="schedule-grid" id="wednesdaySchedule"></div>
            </div>
        </div>
        
        <div id="thursday" class="view thursday-scheme" data-loaded="false">
            <div class="schedule-header thursday-header">
                <div class="navigation">
                    <button class="nav-btn" onclick="showView('week-overview')">‚Üê √ñversikt</button>
                </div>
                <h1>üïå Torsdag - Andlig Djup & Ledarskap</h1>
            </div>
            
            <div class="schedule-content">
                <div class="principles">
                    <h3>üéØ Torsdagens Specialfokus - Andlig Djup & Gemenskapsledarskap</h3>
                    <div class="principle-detailed">
                        <strong>üïå Andlig f√∂rdjupning som grund:</strong> L√§ngre andliga perioder f√∂r djupare connection.
                    </div>
                </div>
                
                <div class="schedule-grid" id="thursdaySchedule"></div>
            </div>
        </div>
        
        <div id="friday" class="view friday-scheme" data-loaded="false">
            <div class="schedule-header friday-header">
                <div class="navigation">
                    <button class="nav-btn" onclick="showView('week-overview')">‚Üê √ñversikt</button>
                </div>
                <h1>üéâ Fredag - Kreativitet & Completion</h1>
            </div>
            
            <div class="schedule-content">
                <div class="principles">
                    <h3>üéØ Fredagens Specialfokus - Kreativ Fullst√§ndighet</h3>
                    <div class="principle-detailed">
                        <strong>üé® Creative expression:</strong> L√•t kreativitet flow through your work.
                    </div>
                </div>
                
                <div class="schedule-grid" id="fridaySchedule"></div>
            </div>
        </div>
        
        <div id="saturday" class="view saturday-scheme" data-loaded="false">
            <div class="schedule-header saturday-header">
                <div class="navigation">
                    <button class="nav-btn" onclick="showView('week-overview')">‚Üê √ñversikt</button>
                </div>
                <h1>üè° L√∂rdag - Familj & Restoration</h1>
            </div>
            
            <div class="schedule-content">
                <div class="principles">
                    <h3>üéØ L√∂rdagens Specialfokus - Familj & Recovery</h3>
                    <div class="principle-detailed">
                        <strong>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family presence:</strong> Full attention och emotional availability f√∂r family.
                    </div>
                </div>
                
                <div class="schedule-grid" id="saturdaySchedule"></div>
            </div>
        </div>
        
        <div id="sunday" class="view sunday-scheme" data-loaded="false">
            <div class="schedule-header sunday-header">
                <div class="navigation">
                    <button class="nav-btn" onclick="showView('week-overview')">‚Üê √ñversikt</button>
                </div>
                <h1>üåÖ S√∂ndag - Reflektion & Preparation</h1>
            </div>
            
            <div class="schedule-content">
                <div class="principles">
                    <h3>üéØ S√∂ndagens Specialfokus - Reflektion & F√∂rberedelse</h3>
                    <div class="principle-detailed">
                        <strong>üîç Week reflection:</strong> Extract lessons och celebrate wins fr√•n completed week.
                    </div>
                </div>
                
                <div class="schedule-grid" id="sundaySchedule"></div>
            </div>
        </div>
    </div>

    <script>
        // Performance optimized JavaScript
        (function() {
            'use strict';
            
            // Cache DOM elements
            const elements = {
                currentTime: null,
                weekGrid: null,
                views: null
            };
            
            // Schedule data - moved to top for better performance
            const scheduleData = {
                monday: [
                    { time: "05:30-06:30", activity: "üåÖ Morgon Foundation", description: "Andlig reflektion, intention-setting f√∂r dagen" },
                    { time: "06:30-07:30", activity: "üìö Deep Learning", description: "Focused study n√§r mind √§r fresh" },
                    { time: "07:30-09:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Familj & Prep", description: "Quality family time, breakfast" },
                    { time: "09:00-12:00", activity: "üéØ High-Impact Work", description: "Most challenging tasks, peak cognitive hours" },
                    { time: "12:00-13:00", activity: "üçΩÔ∏è Mindful Lunch", description: "Nutritious meal, mental reset" },
                    { time: "13:00-17:00", activity: "üíº Productive Flow", description: "Meetings, collaboration, admin" },
                    { time: "17:00-19:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Priority", description: "Full presence med family, dinner" },
                    { time: "19:00-20:30", activity: "üìñ Personal Development", description: "Reading, reflection, skill-building" },
                    { time: "20:30-22:00", activity: "üåô Evening Wind-Down", description: "Family time, preparation f√∂r tomorrow" }
                ],
                tuesday: [
                    { time: "05:30-06:30", activity: "üí™ Power Morning", description: "Intensive workout, peak performance prep" },
                    { time: "06:30-07:30", activity: "üß† Strategic Thinking", description: "High-level planning, problem-solving" },
                    { time: "07:30-09:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Connection", description: "Engaged family time, supportive send-off" },
                    { time: "09:00-12:00", activity: "üöÄ Peak Performance Work", description: "Most demanding projects, complex decisions" },
                    { time: "12:00-13:00", activity: "‚ö° Energy Restoration", description: "Nutritious meal, power nap/meditation" },
                    { time: "13:00-17:00", activity: "üéØ Focused Execution", description: "Implementation, productive meetings" },
                    { time: "17:00-19:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Excellence", description: "Quality time, engaging conversations" },
                    { time: "19:00-20:30", activity: "üìà Skill Development", description: "Advanced learning, professional development" },
                    { time: "20:30-22:00", activity: "üéØ Next-Day Prep", description: "Strategic planning f√∂r tomorrow" }
                ],
                wednesday: [
                    { time: "05:30-06:30", activity: "‚öñÔ∏è Balanced Morning", description: "Movement, meditation, balanced start" },
                    { time: "06:30-07:30", activity: "üå± Growth & Learning", description: "Sustainable learning approach" },
                    { time: "07:30-09:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Nurturing Family Time", description: "Caring interactions, balanced attention" },
                    { time: "09:00-12:00", activity: "üîÑ Steady Progress", description: "Consistent productive work" },
                    { time: "12:00-13:00", activity: "üßò Mindful Break", description: "Reflective meal, mindfulness practice" },
                    { time: "13:00-17:00", activity: "üìä Balanced Productivity", description: "Mix av focused work och collaboration" },
                    { time: "17:00-19:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Quality Family Connection", description: "Engaged family time, meaningful conversations" },
                    { time: "19:00-20:30", activity: "üí° Wisdom Integration", description: "Reflection on lessons learned" },
                    { time: "20:30-22:00", activity: "üåÖ Tomorrow's Foundation", description: "Gentle preparation, intention setting" }
                ],
                thursday: [
                    { time: "05:00-06:30", activity: "üïå Extended Spiritual Practice", description: "Djupare andlig tid f√∂r connection, guidance" },
                    { time: "06:30-07:30", activity: "üìñ Wisdom Study", description: "Study f√∂r wisdom och leadership perspective" },
                    { time: "07:30-09:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Leadership Family Time", description: "Model leadership genom caring presence" },
                    { time: "09:00-12:00", activity: "üåç Strategic Leadership Work", description: "Community impact work, visionary planning" },
                    { time: "12:00-13:00", activity: "ü§≤ Gratitude & Reflection", description: "Mindful meal med gratitude practice" },
                    { time: "13:00-17:00", activity: "üíº Impactful Work", description: "Work som creates positive impact" },
                    { time: "17:00-19:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Wisdom Family Time", description: "Share wisdom, model values" },
                    { time: "19:00-20:30", activity: "üìö Community Learning", description: "Study f√∂r community service capacity" },
                    { time: "20:30-22:00", activity: "üåü Vision & Planning", description: "Long-term vision, strategic planning" }
                ],
                friday: [
                    { time: "05:30-06:30", activity: "üé® Creative Morning Flow", description: "Creative expression, innovative thinking" },
                    { time: "06:30-07:30", activity: "‚ú® Inspiration Time", description: "Inspiring content, vision work" },
                    { time: "07:30-09:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Joyful Family Time", description: "Playful, creative family interactions" },
                    { time: "09:00-12:00", activity: "üöÄ Creative Problem Solving", description: "Innovative work, creative solutions" },
                    { time: "12:00-13:00", activity: "üéâ Celebration Break", description: "Acknowledge accomplishments, celebrate progress" },
                    { time: "13:00-17:00", activity: "‚úÖ Completion Focus", description: "Finish week's tasks med excellence" },
                    { time: "17:00-19:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Weekend Transition", description: "Begin weekend mood med family" },
                    { time: "19:00-20:30", activity: "üé® Personal Creative Expression", description: "Personal creative projects, artistic expression" },
                    { time: "20:30-22:00", activity: "üåÖ Weekend Preparation", description: "Mental transition, gratitude f√∂r week" }
                ],
                saturday: [
                    { time: "07:00-08:00", activity: "üåÖ Gentle Awakening", description: "Slower morning routine, peaceful transition" },
                    { time: "08:00-10:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Breakfast", description: "Extended family breakfast, meaningful conversations" },
                    { time: "10:00-12:00", activity: "üè° Home & Personal Care", description: "Home maintenance, personal organization" },
                    { time: "12:00-14:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Activity Time", description: "Fun family activities, outdoor time" },
                    { time: "14:00-15:00", activity: "üíÜ‚Äç‚ôÇÔ∏è Personal Restoration", description: "Self-care activities, relaxation" },
                    { time: "15:00-17:00", activity: "üå≥ Nature & Recreation", description: "Outdoor activities, recreational pursuits" },
                    { time: "17:00-19:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Dinner", description: "Special family dinner, sharing stories" },
                    { time: "19:00-21:00", activity: "üé≠ Entertainment & Joy", description: "Family entertainment, movies, games" },
                    { time: "21:00-22:00", activity: "üåô Peaceful Evening", description: "Gentle wind-down, gratitude reflection" }
                ],
                sunday: [
                    { time: "07:00-08:30", activity: "üåÖ Reflective Morning", description: "Peaceful morning routine, week reflection" },
                    { time: "08:30-10:00", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Meaningful Family Time", description: "Deep family conversations, sharing highlights" },
                    { time: "10:00-12:00", activity: "üìù Week Review", description: "Systematic review av accomplishments och lessons" },
                    { time: "12:00-14:00", activity: "üçΩÔ∏è Leisurely Family Lunch", description: "Extended family meal, relaxed conversations" },
                    { time: "14:00-16:00", activity: "üìÖ Strategic Week Planning", description: "Thoughtful planning f√∂r upcoming week" },
                    { time: "16:00-18:00", activity: "üå± Personal Growth Integration", description: "Apply insights, set development goals" },
                    { time: "18:00-19:30", activity: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Vision Time", description: "Share dreams, align on family direction" },
                    { time: "19:30-21:00", activity: "üìö Inspirational Learning", description: "Read inspiring material f√∂r excellent week" },
                    { time: "21:00-22:00", activity: "‚ö° Monday Anticipation", description: "Build excited anticipation f√∂r fresh start" }
                ]
            };
            
            const dayDescriptions = {
                monday: { theme: "üåÖ Foundation & Fresh Start", summary: "S√§tt tonen f√∂r veckan med kraftfull morning routine." },
                tuesday: { theme: "üí™ Power & Peak Performance", summary: "Maximera produktivitet med peak performance execution." },
                wednesday: { theme: "‚öñÔ∏è Balance & Sustainable Growth", summary: "Perfect balance mellan action och restoration." },
                thursday: { theme: "üïå Spiritual Depth & Leadership", summary: "Djupare andlig connection som foundation f√∂r leadership." },
                friday: { theme: "üé® Creativity & Completion", summary: "Innovativ completion och celebration av progress." },
                saturday: { theme: "üè° Family & Restoration", summary: "Quality family time och gentle self-care." },
                sunday: { theme: "üìù Reflection & Preparation", summary: "Extract wisdom och prepare f√∂r upcoming adventures." }
            };
            
            // Performance optimized functions
            const utils = {
                // Debounced function for performance
                debounce: function(func, wait) {
                    let timeout;
                    return function executedFunction(...args) {
                        const later = () => {
                            clearTimeout(timeout);
                            func(...args);
                        };
                        clearTimeout(timeout);
                        timeout = setTimeout(later, wait);
                    };
                },
                
                // Throttled function for scroll/update events
                throttle: function(func, limit) {
                    let inThrottle;
                    return function() {
                        const args = arguments;
                        const context = this;
                        if (!inThrottle) {
                            func.apply(context, args);
                            inThrottle = true;
                            setTimeout(() => inThrottle = false, limit);
                        }
                    };
                }
            };
            
            // Initialize DOM cache
            function initDOMCache() {
                elements.currentTime = document.getElementById('currentTime');
                elements.weekGrid = document.getElementById('weekGrid');
                elements.views = document.querySelectorAll('.view');
            }
            
            // Optimized time update with throttling
            const updateCurrentTime = utils.throttle(function() {
                if (!elements.currentTime) return;
                
                const now = new Date();
                const timeString = now.toLocaleTimeString('sv-SE', { hour: '2-digit', minute: '2-digit' });
                const dateString = now.toLocaleDateString('sv-SE', { weekday: 'long', month: 'long', day: 'numeric' });
                
                elements.currentTime.innerHTML = `${timeString}<br><small>${dateString}</small>`;
            }, 1000);
            
            // Optimized week grid generation with document fragment
            function generateWeekGrid() {
                if (!elements.weekGrid) return;
                
                const now = new Date();
                const currentDay = now.getDay();
                const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
                const dayNames = ['M√•ndag', 'Tisdag', 'Onsdag', 'Torsdag', 'Fredag', 'L√∂rdag', 'S√∂ndag'];
                
                const fragment = document.createDocumentFragment();
                
                days.forEach((day, index) => {
                    const isToday = (index + 1) % 7 === currentDay;
                    const dayData = dayDescriptions[day];
                    
                    const dayCard = document.createElement('div');
                    dayCard.className = `day-card ${day} ${isToday ? 'today' : ''}`;
                    dayCard.onclick = () => showView(day);
                    
                    dayCard.innerHTML = `
                        <div class="day-header ${day}">
                            ${dayNames[index]}
                            ${isToday ? '<div class="today-indicator">IDAG</div>' : ''}
                        </div>
                        <div class="day-content">
                            <div class="day-theme">${dayData.theme}</div>
                            <div class="day-summary">${dayData.summary}</div>
                        </div>
                    `;
                    
                    fragment.appendChild(dayCard);
                });
                
                elements.weekGrid.innerHTML = '';
                elements.weekGrid.appendChild(fragment);
            }
            
            // Lazy load schedule generation
            function generateDaySchedule(day) {
                const scheduleEl = document.getElementById(`${day}Schedule`);
                if (!scheduleEl) return;
                
                const schedule = scheduleData[day];
                const now = new Date();
                const currentTime = now.getHours() * 60 + now.getMinutes();
                
                const fragment = document.createDocumentFragment();
                
                schedule.forEach((block) => {
                    const timeBlock = document.createElement('div');
                    const [startTime] = block.time.split('-');
                    const [hours, minutes] = startTime.split(':').map(Number);
                    const blockTime = hours * 60 + minutes;
                    
                    const isCurrentBlock = Math.abs(currentTime - blockTime) < 60;
                    
                    timeBlock.className = `time-block ${isCurrentBlock ? 'current' : ''}`;
                    timeBlock.innerHTML = `
                        <div class="time">${block.time}</div>
                        <div class="activity">${block.activity}</div>
                        <div class="description">${block.description}</div>
                    `;
                    
                    fragment.appendChild(timeBlock);
                });
                
                scheduleEl.innerHTML = '';
                scheduleEl.appendChild(fragment);
            }
            
            // Optimized view switching with lazy loading
            function showView(viewId) {
                // Remove active class from all views
                elements.views.forEach(view => view.classList.remove('active'));
                
                const targetView = document.getElementById(viewId);
                if (targetView) {
                    targetView.classList.add('active');
                    
                    // Lazy load schedule if not loaded
                    if (viewId !== 'week-overview' && targetView.dataset.loaded !== 'true') {
                        generateDaySchedule(viewId);
                        targetView.dataset.loaded = 'true';
                    }
                    
                    // Update body class for color scheme
                    if (viewId !== 'week-overview') {
                        document.body.className = `${viewId}-scheme`;
                    } else {
                        document.body.className = '';
                    }
                }
            }
            
            // Initialize app with performance optimizations
            function initApp() {
                // Use requestIdleCallback for non-critical initialization
                if ('requestIdleCallback' in window) {
                    requestIdleCallback(() => {
                        initDOMCache();
                        updateCurrentTime();
                        generateWeekGrid();
                        
                        // Set up time update interval
                        setInterval(updateCurrentTime, 60000);
                    });
                } else {
                    // Fallback for older browsers
                    setTimeout(() => {
                        initDOMCache();
                        updateCurrentTime();
                        generateWeekGrid();
                        
                        setInterval(updateCurrentTime, 60000);
                    }, 0);
                }
            }
            
            // Expose showView globally
            window.showView = showView;
            
            // Initialize when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initApp);
            } else {
                initApp();
            }
            
            // Prevent zoom on iOS
            document.addEventListener('gesturestart', function(e) {
                e.preventDefault();
            }, { passive: false });
            
        })();
    </script>
</body>
</html>